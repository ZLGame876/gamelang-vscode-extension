# GameLang 模块系统指南

## 概述

GameLang提供了两种模块导入机制：
- **`import`语句**：标准的模块导入，支持命名空间和别名
- **`use`语句**：简化的模块导入，全局可见

## 1. import语句（推荐）

### 基本语法
```ln
import 模块名;
import 模块名 as 别名;
```

### 使用示例
```ln
# 导入模块
import 数学工具;
import 游戏引擎 as 引擎;
import 网络库 as net;

# 使用模块
结果 = 数学工具.加法(10, 20);
游戏 = 引擎.创建游戏("我的游戏");
连接 = net.连接("localhost", 8080);
```

### 优势
- **命名空间隔离**：避免符号冲突
- **别名支持**：可以给模块起别名
- **清晰依赖**：明确显示模块依赖关系
- **IDE支持**：更好的自动补全和跳转

## 2. use语句（简化）

### 基本语法
```ln
use 模块名;
use "模块文件路径";
```

### 使用示例
```ln
# 导入模块
use "utils.ln";
use "config.ln";

# 直接使用（全局可见）
配置 = 获取配置();
工具函数();
```

### 特点
- **全局可见**：导入的符号在整个文件中可见
- **简单易用**：无需前缀访问
- **适合小项目**：快速开发时使用

## 3. 模块冲突处理

### 使用别名避免冲突
```ln
import 数学工具;
import 游戏引擎 as 引擎;

# 避免冲突
结果1 = 数学工具.计算(1, 2);
结果2 = 引擎.计算(3, 4);
```

### 使用use时的冲突处理
```ln
use "math.ln";
use "game.ln";

# 注意：use导入的符号可能冲突
# 建议使用import来避免冲突
```

## 4. 条件导入

### 运行时条件导入
```ln
fn 条件导入() {
    if 平台 == "Windows":
        import Windows专用库;
        Windows专用库.初始化();
    elif 平台 == "Mac":
        import Mac专用库;
        Mac专用库.初始化();
    else:
        import 通用库;
        通用库.初始化();
    }
}
```

## 5. 模块开发指南

### 模块结构
```ln
# 模块信息
模块名称 = "模块名";
版本 = "1.0.0";
作者 = "作者名";

# 导出常量
PI = 3.14159;

# 导出函数
fn 公共函数() {
    return "这是公共函数";
}

# 私有函数（以下划线开头）
fn _私有函数() {
    return "这是私有函数";
}

# 模块初始化
fn 初始化() {
    print("模块已加载");
}

# 自动初始化
初始化();
```

### 模块导出规则
- **默认导出**：所有顶层函数和变量
- **私有符号**：以下划线开头的符号
- **自动初始化**：模块加载时自动执行

## 6. 最佳实践

### 选择导入方式
```ln
# 推荐：使用import
import 数学工具;
import 游戏引擎 as 引擎;

# 简单项目：可以使用use
use "utils.ln";
```

### 模块命名
```ln
# 好的命名
import 数学工具;
import 游戏引擎;
import 网络库;

# 避免的命名
import math;  # 太通用
import 工具;  # 太模糊
```

### 文件组织
```
项目/
├── 主程序.ln
├── 模块/
│   ├── 数学工具.ln
│   ├── 游戏引擎.ln
│   └── 网络库.ln
└── 配置/
    ├── 开发配置.ln
    └── 生产配置.ln
```

## 7. 常见问题

### Q: import和use有什么区别？
**A:** 
- `import`：标准导入，有命名空间，支持别名
- `use`：简化导入，全局可见，适合小项目

### Q: 如何处理循环依赖？
**A:** 
- 避免循环依赖
- 使用延迟导入
- 重构模块结构

### Q: 模块文件找不到怎么办？
**A:** 
- 检查文件路径
- 确保文件存在
- 检查文件扩展名

### Q: 如何创建私有函数？
**A:** 
- 使用下划线前缀：`fn _私有函数()`
- 不在模块顶层定义

## 8. 高级特性

### 动态导入
```ln
fn 动态导入(模块名) {
    if (模块名 == "数学") {
        import 数学工具;
        return 数学工具;
    } elif (模块名 == "游戏") {
        import 游戏引擎;
        return 游戏引擎;
    }
}
```

### 模块缓存
```ln
# 模块只会被加载一次
import 数学工具;  # 第一次加载
import 数学工具;  # 使用缓存
```

### 模块卸载
```ln
# 当前版本不支持显式卸载
# 模块在程序结束时自动清理
```

## 9. 性能考虑

### 导入开销
- 模块首次导入有解析开销
- 后续导入使用缓存
- 建议按需导入

### 内存使用
- 每个模块占用一定内存
- 避免导入不需要的模块
- 及时清理不需要的引用

## 10. 调试技巧

### 模块加载调试
```ln
fn 调试模块加载() {
    print("正在加载模块...");
    import 测试模块;
    print("模块加载完成");
}
```

### 符号查找调试
```ln
fn 调试符号查找(符号名) {
    # 检查符号是否可用
    if (符号名 in 全局符号表) {
        print("找到符号:", 符号名);
    else:
        print("未找到符号:", 符号名);
    }
}
```

---

*本指南涵盖了GameLang模块系统的所有重要特性，帮助你更好地组织和管理代码。* 